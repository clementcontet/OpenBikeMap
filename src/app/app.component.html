<mat-sidenav-container>
  <mat-sidenav mode="side" position="end" [opened]="featureSelected()">
    <div *ngIf="interactionState === InteractionState.Consulting">
      <button
        mat-flat-button color="primary" (click)="startModification()">Modifier
      </button>
    </div>
    <div *ngIf="interactionState === InteractionState.Modifying">
      <button
        mat-flat-button color="warn" (click)="cancelEdition()">Annuler
      </button>
    </div>
    <div *ngIf="interactionState === InteractionState.Creating">
      <button
        mat-flat-button color="warn" (click)="cancelEdition()">Annuler la création
      </button>
    </div>

    <mat-card>
      <p *ngIf="selectedPathDistance"> Distance : {{selectedPathDistance}}km</p>
      <br/>
      <p *ngIf="interactionState === InteractionState.Consulting">Avis de la communauté :</p>
      <p *ngIf="interactionState === InteractionState.Modifying || interactionState === InteractionState.Creating"><u>Mon avis :</u></p>
      Piste sécurisée ?
      <bar-rating [(rate)]="securityRating" max="5"
                  [readOnly]="interactionState === InteractionState.Consulting"></bar-rating>
      <br/>
      Jolie balade ?
      <bar-rating [(rate)]="nicenessRating" max="5"
                  [readOnly]="interactionState === InteractionState.Consulting"></bar-rating>
    </mat-card>

    <div *ngIf="interactionState === InteractionState.Modifying">
      <button
        mat-flat-button color="accent" (click)="validateEdition()">Valider la modification
      </button>
    </div>
    <div *ngIf="interactionState === InteractionState.Creating">
      <button
        mat-flat-button color="accent" (click)="validateEdition()">Créer le chemin
      </button>
    </div>
  </mat-sidenav>

  <mat-sidenav-content>
    <div id="bike_map">
      <div *ngIf="user">
        <button id="logout"
                mat-mini-fab
                color="accent"
                matTooltip="Se déconnecter de {{user.email}}"
                (click)="logout()">
          <mat-icon>account_circle</mat-icon>
        </button>
      </div>
      <div *ngIf="!user">
        <button id="login"
                mat-mini-fab
                color="warn"
                matTooltip="Se connecter"
                (click)="login()">
          <mat-icon>account_circle</mat-icon>
        </button>
      </div>

      <button id="enable_draw"
              *ngIf="interactionState === InteractionState.Browsing"
              mat-flat-button
              color="primary"
              (click)="startDrawing()">
        Ajouter un chemin
      </button>
      <button id="disable_draw"
              *ngIf="interactionState === InteractionState.Drawing"
              mat-flat-button
              color="warn"
              (click)="cancelDrawing()">
        Annuler le tracé
      </button>
    </div>
  </mat-sidenav-content>
</mat-sidenav-container>
